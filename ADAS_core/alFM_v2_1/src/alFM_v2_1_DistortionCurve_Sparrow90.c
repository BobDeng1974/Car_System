
#include "mtype.h"
#include "alFM_v2_1_Def.h"

/** \cond DOXYGEN_EXCLUDE */

#define alFM_v2_1_DISTORTION_CURVE_LENGTH    101

static UINT32    g_alFM_v2_1_ulImageWidth = 720;
static UINT32    g_alFM_v2_1_ulImageHeight = 480;
static UINT16    g_alFM_v2_1_uwCODX = 360;
static UINT16    g_alFM_v2_1_uwCODY = 240;

static FLOAT64   g_alFM_v2_1_eFOV_V_Sparrow90 = 66.094968;            // in degree
static FLOAT64   g_alFM_v2_1_eFOV_H_Sparrow90 = 81.002236;            // in degree
static FLOAT64   g_alFM_v2_1_eUD_FOV_H_Sparrow90 = 90.386388;         // in degree, for 2D 反魚眼使用
static FLOAT64   g_alFM_v2_1_eFocalLength_Sparrow90 = 2.00233764;     // in mm
static UINT32    g_alFM_v2_1_ulSensorPixelWidth_Sparrow90 = 640;      // in pixel
static UINT32    g_alFM_v2_1_ulSensorPixelHeight_Sparrow90 = 480;     // in pixel
static UINT32    g_alFM_v2_1_ulSensorPixelSize_Sparrow90 = 5600;      // in nm
static FLOAT64   g_alFM_v2_1_eHResizeRatio_Sparrow90 = 1.1109375;               // in degree

static UINT32     g_alFM_v2_1_ulAngleTableScale_Sparrow90 = 10;
static UINT32    g_alFM_v2_1_ulCurveLength_Sparrow90 = alFM_v2_1_DISTORTION_CURVE_LENGTH;

static FLOAT64 g_alFM_v2_1_aeAngleDegree_Sparrow90[alFM_v2_1_DISTORTION_CURVE_LENGTH] = 
{
    0.00000000,     0.46570010,     0.93140019,     1.39710029,     1.86280039,     2.32850048,     2.79420058,     3.25990068,     3.72560078,     4.19130087,    
    4.65700097,     5.12270107,     5.58840116,     6.05410126,     6.51980136,     6.98550145,     7.45120155,     7.91690165,     8.38260175,     8.84830184,    
    9.31400194,     9.77970204,     10.24540213,    10.71110223,    11.17680233,    11.64250242,    12.10820252,    12.57390262,    13.03960271,    13.50530281,    
    13.97100291,    14.43670301,    14.90240310,    15.36810320,    15.83380330,    16.29950339,    16.76520349,    17.23090359,    17.69660368,    18.16230378,  
    18.62800388,    19.09370397,    19.55940407,    20.02510417,    20.49080427,    20.95650436,    21.42220446,    21.88790456,    22.35360465,    22.81930475,  
    23.28500485,    23.75070494,    24.21640504,    24.68210514,    25.14780524,    25.61350533,    26.07920543,    26.54490553,    27.01060562,    27.47630572, 
    27.94200582,    28.40770591,    28.87340601,    29.33910611,    29.80480620,    30.27050630,    30.73620640,    31.20190650,    31.66760659,    32.13330669,
    32.59900679,    33.06470688,    33.53040698,    33.99610708,    34.46180717,    34.92750727,    35.39320737,    35.85890746,    36.32460756,    36.79030766, 
    37.25600776,    37.72170785,    38.18740795,    38.65310805,    39.11880814,    39.58450824,    40.05020834,    40.51590843,    40.98160853,    41.44730863,    
    41.91300873,    42.37870882,    42.84440892,    43.31010902,    43.77580911,    44.24150921,    44.70720931,    45.17290940,    45.63860950,    46.10430960,    
    46.57000969,
};

static FLOAT64 g_alFM_v2_1_aeRealHeight_Sparrow90[alFM_v2_1_DISTORTION_CURVE_LENGTH] = 
{
    0.00000000,     0.01627627,     0.03255523,     0.04883955,     0.06513193,     0.08143506,     0.09775164,     0.11408438,     0.13043599,     0.14680919,    
    0.16320673,     0.17963136,     0.19608585,     0.21257298,     0.22909557,     0.24565645,     0.26225846,     0.27890448,     0.29559742,     0.31234023,    
    0.32913585,     0.34598732,     0.36289765,     0.37986994,     0.39690732,     0.41401295,     0.43119005,     0.44844189,     0.46577180,     0.48318315,    
    0.50067940,     0.51826403,     0.53594064,     0.55371285,     0.57158437,     0.58955900,     0.60764060,     0.62583312,     0.64414059,     0.66256713,    
    0.68111694,     0.69979433,     0.71860369,     0.73754951,     0.75663639,     0.77586901,     0.79525217,     0.81479076,     0.83448979,     0.85435436,   
    0.87438968,     0.89460109,     0.91499399,     0.93557393,     0.95634654,     0.97731757,     0.99849287,     1.01987840,     1.04148020,     1.06330445,    
    1.08535741,     1.10764543,     1.13017497,     1.15295261,     1.17598499,     1.19927888,     1.22284114,     1.24667871,     1.27079867,     1.29520816,    
    1.31991447,     1.34492496,     1.37024711,     1.39588854,     1.42185697,     1.44816024,     1.47480635,     1.50180341,     1.52915970,     1.55688366,   
    1.58498388,     1.61346915,     1.64234843,     1.67163091,     1.70132598,     1.73144327,     1.76199265,     1.79298427,     1.82442851,     1.85633604,   
    1.88871772,     1.92158460,     1.95494772,     1.98881787,     2.02320513,     2.05811808,     2.09356246,     2.12953895,     2.16603953,     2.20304167,   
    2.24049905,
};

static FLOAT64 g_alFM_v2_1_aeRefHeight_Sparrow90[alFM_v2_1_DISTORTION_CURVE_LENGTH] = 
{
    0.00000000,     0.01627618,     0.03255452,     0.04883715,     0.06512625,     0.08142396,     0.09773244,     0.11405387,     0.13039042,     0.14674427,    
    0.16311761,     0.17951266,     0.19593161,     0.21237670,     0.22885016,     0.24535427,     0.26189127,     0.27846348,     0.29507319,     0.31172274,    
    0.32841447,     0.34515077,     0.36193402,     0.37876667,     0.39565115,     0.41258996,     0.42958559,     0.44664060,     0.46375757,     0.48093910,    
    0.49818784,     0.51550649,     0.53289777,     0.55036445,     0.56790935,     0.58553532,     0.60324528,     0.62104218,     0.63892904,     0.65690891,    
    0.67498493,     0.69316028,     0.71143819,     0.72982197,     0.74831500,     0.76692071,     0.78564263,     0.80448434,     0.82344951,     0.84254189,    
    0.86176530,     0.88112368,     0.90062103,     0.92026145,     0.94004916,     0.95998846,     0.98008376,     1.00033959,     1.02076059,     1.04135152,    
    1.06211726,     1.08306283,     1.10419339,     1.12551421,     1.14703074,     1.16874856,     1.19067344,     1.21281127,     1.23516815,     1.25775034,    
    1.28056429,     1.30361666,     1.32691429,     1.35046425,     1.37427382,     1.39835052,     1.42270210,     1.44733658,     1.47226221,     1.49748756,    
    1.52302144,     1.54887300,     1.57505168,     1.60156725,     1.62842983,     1.65564990,     1.68323830,     1.71120630,     1.73956555,     1.76832814,   
    1.79750663,     1.82711404,     1.85716390,     1.88767026,     1.91864773,     1.95011150,     1.98207736,     2.01456175,     2.04758180,     2.08115534,    
    2.11530095,    
};

static FLOAT64 g_alFM_v2_1_aeDistortionCurve_Sparrow90[alFM_v2_1_DISTORTION_CURVE_LENGTH] = 
{
    0.0000000000,   0.0000054559,   0.0000218246,   0.0000491086,   0.0000873119,   0.0001364405,   0.0001965025,   0.0002675077,   0.0003494687,   0.0004424004,   
    0.0005463206,   0.0006612503,   0.0007872140,   0.0009242403,   0.0010723618,   0.0012316159,   0.0014020451,   0.0015836976,   0.0017766275,   0.0019808954,    
    0.0021965689,   0.0024237227,   0.0026624397,   0.0029128107,   0.0031749352,   0.0034489215,   0.0037348872,   0.0040329593,   0.0043432746,   0.0046659793,    
    0.0050012296,   0.0053491916,   0.0057100405,   0.0060839612,   0.0064711474,   0.0068718011,   0.0072861323,   0.0077143579,   0.0081567008,   0.0086133892,    
    0.0090846547,   0.0095707315,   0.0100718546,   0.0105882580,   0.0111201729,   0.0116678256,   0.0122314352,   0.0128112115,   0.0134073523,   0.0140200405,    
    0.0146494421,   0.0152957025,   0.0159589442,   0.0166392638,   0.0173367286,   0.0180513742,   0.0187832012,   0.0195321724,   0.0202982105,   0.0210811948,    
    0.0218809592,   0.0226972900,   0.0235299237,   0.0243785455,   0.0252427875,   0.0261222278,   0.0270163899,   0.0279247413,   0.0288466944,   0.0297816058,    
    0.0307287771,   0.0316874553,   0.0326568343,   0.0336360556,   0.0346242100,   0.0356203393,   0.0366234382,   0.0376324560,   0.0386462993,   0.0396638342,    
    0.0406838886,   0.0417052552,   0.0427266943,   0.0437469365,   0.0447646859,   0.0457786221,   0.0467874019,   0.0477896584,   0.0487839969,   0.0497689828,    
    0.0507431180,   0.0517047972,   0.0526522291,   0.0535833022,   0.0544953594,   0.0553848250,   0.0562465958,   0.0570730557,   0.0578525021,   0.0585666657,    
    0.0591868942,
};

void alFM_v2_1_LoadModedCfg_Sparrow90(alFM_v2_1_ModelCfg * a_ptFM_v2_Cfg)
{
    UINT16 uwDI;

    a_ptFM_v2_Cfg->ulImageWidth = g_alFM_v2_1_ulImageWidth;
    a_ptFM_v2_Cfg->ulImageHeight = g_alFM_v2_1_ulImageHeight;
    a_ptFM_v2_Cfg->uwCOD_X = g_alFM_v2_1_uwCODX;
    a_ptFM_v2_Cfg->uwCOD_Y = g_alFM_v2_1_uwCODY;

    a_ptFM_v2_Cfg->uwSrcSensorWidth = g_alFM_v2_1_ulSensorPixelWidth_Sparrow90;
    a_ptFM_v2_Cfg->ulSensorPixelSize = g_alFM_v2_1_ulSensorPixelSize_Sparrow90;
    a_ptFM_v2_Cfg->uwLengthOfDistortionCurve = g_alFM_v2_1_ulCurveLength_Sparrow90;
    a_ptFM_v2_Cfg->uwAngleTableScale = g_alFM_v2_1_ulAngleTableScale_Sparrow90;
    a_ptFM_v2_Cfg->eFocalLength = g_alFM_v2_1_eFocalLength_Sparrow90;
    a_ptFM_v2_Cfg->eFOV_H = g_alFM_v2_1_eFOV_H_Sparrow90;
    a_ptFM_v2_Cfg->eUD_FOV_H = g_alFM_v2_1_eUD_FOV_H_Sparrow90;
    a_ptFM_v2_Cfg->eHResizeRatio = g_alFM_v2_1_eHResizeRatio_Sparrow90;

    for(uwDI = 0; uwDI < g_alFM_v2_1_ulCurveLength_Sparrow90; uwDI++)
    {
        a_ptFM_v2_Cfg->aeAngleDegree[uwDI] = g_alFM_v2_1_aeAngleDegree_Sparrow90[uwDI];
        a_ptFM_v2_Cfg->aeRealHeight[uwDI] = g_alFM_v2_1_aeRealHeight_Sparrow90[uwDI];
#if 0
        a_ptFM_v2_Cfg->aeRefHeight[uwDI] = g_alFM_v2_1_aeRefHeight_Sparrow90[uwDI];
        a_ptFM_v2_Cfg->aeDistortion[uwDI] = g_alFM_v2_1_aeDistortionCurve_Sparrow90[uwDI];
#endif
    }
}

#undef alFM_v2_1_DISTORTION_CURVE_LENGTH

/** \endcond DOXYGEN_EXCLUDE */
